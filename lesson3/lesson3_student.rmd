Lesson 3
========================================================

***

### What to Do First?
Notes:
```{r}
getwd()
setwd('~/Dropbox/Projects/da/eda/lesson3/')
```

***

### Pseudo-Facebook User Data
Notes:

```{r Pseudo-Facebook User Data}
# pf <- read.csv('pseudo_facebook.tsv', sep='\t')
pf <- read.delim('pseudo_facebook.tsv')
```

***

### Histogram of Users' Birthdays
Notes:

```{r Histogram of Users\' Birthdays}
# install.packages('ggplot2')
library(ggplot2)

names(pf)
# qplot(x=dob_day, data=pf) +
#   scale_x_discrete(breaks=1:31)

# theme_set(theme_fivethirtyeight(12))
ggplot(aes(x = dob_day), data = pf) + 
  geom_histogram() + 
  scale_x_discrete(breaks = 1:31)
```

***

#### What are some things that you notice about this histogram?
Response:
The first day of month has significantly more occurrences of birth than any other day, which is unusual since you'd expect birth dates to be evenly distributed between all days of the month. The 31st has significantly less than any other day, which can be explained by the fact that not all months have 31 days in them.
***

### Moira's Investigation
Notes:
After surveying a facebook users for their perceived amount of views for their posts, Moira noticed a significant discrepency between the perceived and actual view counts.
***

### Estimating Your Audience Size
Notes:

***

#### Think about a time when you posted a specific message or shared a photo on Facebook. What was it?
Response:
A repost of Parse's announcement that they're running RocksDB on MongoDB

#### How many of your friends do you think saw that post?
Response:
60

#### Think about what percent of your friends on Facebook see any posts or comments that you make in a month. What percent do you think that is?
Response:
20

***

### Perceived Audience Size
Notes:
Moria found that people underestimated their view counts, usually estimating about 25% of the actual viewcounts.
***
### Faceting
Notes:

```{r Faceting}
ggplot(aes(x=dob_day), data=pf) +
  geom_histogram() +
  scale_x_discrete(breaks=1:31) +
  facet_wrap(~dob_month, ncol=3)
```

#### Let’s take another look at our plot. What stands out to you here?
Response:
There's a significantly large amount of birth dates on New Years Day. This may be indicative of users entering false data, selecting the default birth date out of laziness or privacy concern.
***

### Be Skeptical - Outliers and Anomalies
Notes:

***

### Moira's Outlier
Notes:
#### Which case do you think applies to Moira’s outlier?
Response:
bad data about an extreme case
***

### Friend Count
Notes:

#### What code would you enter to create a histogram of friend counts?

```{r Friend Count}
ggplot(aes(x=friend_count), data=pf) +
  geom_histogram()
```

#### How is this plot similar to Moira's first plot?
Response:
It's heavily skewed to the right.
***

### Limiting the Axes
Notes:

```{r Limiting the Axes}
ggplot(aes(x=friend_count), data=pf) +
  geom_histogram() +
  scale_x_continuous(limits=c(0,1000))
```

### Exploring with Bin Width
Notes:

***

### Adjusting the Bin Width
Notes:

### Faceting Friend Count
```{r Faceting Friend Count}
# What code would you add to create a facet the histogram by gender?
# Add it to the code below.
qplot(x = friend_count, data = pf, binwidth = 25) +
  scale_x_continuous(limits = c(0, 1000),
                     breaks = seq(0, 1000, 50)) +
  facet_wrap(~gender)
  #facet_grid(gender ~ .)
```

***

### Omitting NA Values
Notes:

```{r Omitting NA Values}
ggplot(aes(x=friend_count), data=subset(pf, !is.na(gender)), binwidth=25) +
  geom_histogram() +
  scale_x_continuous(limits=c(0, 1000),
                     breaks=seq(0, 1000, 50)) +
  facet_wrap(~gender)
```

***

### Statistics 'by' Gender
Notes:

```{r Statistics \'by\' Gender}
table(pf$gender)
by(pf$friend_count, pf$gender, summary)
```

#### Who on average has more friends: men or women?
Response:
Women

#### What's the difference between the median friend count for women and men?
Response:
22

#### Why would the median be a better measure than the mean?
Response:
Since the distribution is skewed towards users with high friend counts, median is more representative of the typical friend count.
***

### Tenure
Notes:

```{r Tenure}
ggplot(aes(x=tenure), data=pf) +
  geom_histogram(binwidth=30, color='black', fill='#099DD9')
```

***

#### How would you create a histogram of tenure by year?

```{r Tenure Histogram by Year}
ggplot(aes(x=tenure/365), data=pf) +
  geom_histogram(binwidth=.1, color='black', fill='#099DD9') +
  scale_x_continuous(breaks=seq(1,7,1), lim=c(0,7))
```

***

### Labeling Plots
Notes:

```{r Labeling Plots}
ggplot(aes(x=tenure/365), data=pf) +
  geom_histogram(binwidth=.1, color='black', fill='#099DD9') +
  scale_x_continuous(breaks=seq(1,7,1), lim=c(0,7)) +
  xlab('Number of years using Facebook') +
  ylab('Number of users in sample')
```

***

### User Ages
Notes:

```{r User Ages}
ggplot(aes(x=age), data=pf) +
  geom_histogram(binwidth=1, color='black', fill='#099DD9') +
  scale_x_discrete(breaks=seq(10,115,5)) +
  xlab('Age of Facebook user') +
  ylab('Number of users in sample')
```

#### What do you notice?
Response:
There a few outliers spikes of users over 100 years old. Most of the users are in their teens and twenties.
***

### The Spread of Memes
Notes:

***

### Lada's Money Bag Meme
Notes:

***

### Transforming Data
Notes:

***

### Add a Scaling Layer
Notes:

```{r Add a Scaling Layer}
# install.packages("gridExtra")
library('gridExtra')
p1 <- ggplot(aes(x=friend_count), data=pf, binwidth=25) +
        geom_histogram() +
        xlab('Friend Count') +
        ylab('Number of Users')
p2 <- p1 + scale_x_log10()
p3 <- p1 + scale_x_sqrt()
grid.arrange(p1, p2, p3)
```

***


### Frequency Polygons

```{r Frequency Polygons}
ggplot(aes(x=friend_count, y=..count../sum(..count..)),
       data=subset(pf, !is.na(gender)),
       binwidth=10) +
  geom_freqpoly(aes(color=gender), binwidth=10) +
  scale_x_continuous(limits=c(0,1000),
                     breaks=seq(0,1000,50)) +
  xlab('Friend Count') +
  ylab('Proportion of Users with that friend count')

ggplot(aes(x=www_likes),
       data=subset(pf, !is.na(gender))) +
  geom_freqpoly(aes(color=gender)) +
  scale_x_log10() +
  xlab('Like Count') +
  ylab('Number of Users with that like count')
```

***

### Likes on the Web
Notes:

```{r Likes on the Web}
by(pf$www_likes, pf$gender, sum)
```


***

### Box Plots
Notes:

```{r Box Plots}
qplot(x=gender, y=friend_count,
      data=subset(pf, !is.na(gender)),
      geom='boxplot')
```

#### Adjust the code to focus on users who have friend counts between 0 and 1000.

```{r}
qplot(x=gender, y=friend_count,
      data=subset(pf, !is.na(gender)),
      geom='boxplot') +
  coord_cartesian(ylim=c(0,1000))
```

***

### Box Plots, Quartiles, and Friendships
Notes:

```{r Box Plots, Quartiles, and Friendships}
qplot(x=gender, y=friend_count,
      data=subset(pf, !is.na(gender)),
      geom='boxplot') +
  coord_cartesian(ylim=c(0,250))

by(pf$friend_count, pf$gender, summary)
```

#### On average, who initiated more friendships in our sample: men or women?
Response: women
#### Write about some ways that you can verify your answer.
Response: use boxplots or use 'by' to apply 'summary' to summarize friendships_initiated split gender
```{r Friend Requests by Gender}
qplot(x=gender, y=friendships_initiated,
      data=subset(pf, !is.na(gender)),
      geom='boxplot') +
  coord_cartesian(ylim=c(0,150))

by(pf$friendships_initiated, pf$gender, summary)
```

Response:

***

### Getting Logical
Notes:

```{r Getting Logical}
summary(pf$mobile_likes)
summary(pf$mobile_likes > 0)

pf$mobile_check_in <- NA
pf$mobile_check_in <- ifelse(pf$mobile_likes > 0, 1, 0)
pf$mobile_check_in <- factor(pf$mobile_check_in)

summary(pf$mobile_check_in)
sum(pf$mobile_check_in == 1)/length(pf$mobile_check_in)
```

Response:

***

### Analyzing One Variable
Reflection:

***

Click **KnitHTML** to see all of your hard work and to have an html
page of this lesson, your answers, and your notes!